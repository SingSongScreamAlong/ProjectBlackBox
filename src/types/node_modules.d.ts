// Type declarations for Node.js modules used in the project

// Events module
declare module 'events' {
  export class EventEmitter {
    addListener(event: string | symbol, listener: (...args: any[]) => void): this;
    on(event: string | symbol, listener: (...args: any[]) => void): this;
    once(event: string | symbol, listener: (...args: any[]) => void): this;
    removeListener(event: string | symbol, listener: (...args: any[]) => void): this;
    off(event: string | symbol, listener: (...args: any[]) => void): this;
    removeAllListeners(event?: string | symbol): this;
    setMaxListeners(n: number): this;
    getMaxListeners(): number;
    listeners(event: string | symbol): Function[];
    rawListeners(event: string | symbol): Function[];
    emit(event: string | symbol, ...args: any[]): boolean;
    listenerCount(event: string | symbol): number;
    prependListener(event: string | symbol, listener: (...args: any[]) => void): this;
    prependOnceListener(event: string | symbol, listener: (...args: any[]) => void): this;
    eventNames(): Array<string | symbol>;
  }
}

// Zlib module
declare module 'zlib' {
  export function deflateSync(buf: string | Buffer, options?: any): Buffer;
  export function deflate(buf: string | Buffer, callback: (error: Error | null, result: Buffer) => void): void;
  export function deflate(buf: string | Buffer, options: any, callback: (error: Error | null, result: Buffer) => void): void;
  export function inflateSync(buf: Buffer, options?: any): Buffer;
  export function inflate(buf: Buffer, callback: (error: Error | null, result: Buffer) => void): void;
  export function inflate(buf: Buffer, options: any, callback: (error: Error | null, result: Buffer) => void): void;
  export function gzipSync(buf: string | Buffer, options?: any): Buffer;
  export function gzip(buf: string | Buffer, callback: (error: Error | null, result: Buffer) => void): void;
  export function gzip(buf: string | Buffer, options: any, callback: (error: Error | null, result: Buffer) => void): void;
  export function gunzipSync(buf: Buffer, options?: any): Buffer;
  export function gunzip(buf: Buffer, callback: (error: Error | null, result: Buffer) => void): void;
  export function gunzip(buf: Buffer, options: any, callback: (error: Error | null, result: Buffer) => void): void;
}

// Socket.io client module
declare module 'socket.io-client' {
  export function io(url: string, options?: any): Socket;
  
  export interface Socket {
    connected: boolean;
    id: string;
    open(): Socket;
    connect(): Socket;
    send(...args: any[]): Socket;
    emit(event: string, ...args: any[]): Socket;
    close(): Socket;
    disconnect(): Socket;
    compress(value: boolean): Socket;
    on(event: string, fn: (...args: any[]) => void): Socket;
    once(event: string, fn: (...args: any[]) => void): Socket;
    off(event?: string, fn?: (...args: any[]) => void): Socket;
    removeListener(event: string, fn?: (...args: any[]) => void): Socket;
    removeAllListeners(event?: string): Socket;
    listeners(event: string): Function[];
  }
}

// NodeJS namespace
declare namespace NodeJS {
  interface ProcessEnv {
    [key: string]: string | undefined;
  }
  
  interface Process {
    env: ProcessEnv;
    platform: string;
    argv: string[];
    versions: {
      node: string;
      v8: string;
      [key: string]: string;
    };
  }
  
  interface Global {
    process: Process;
  }
  
  // Fix for Timeout type compatibility with setInterval/setTimeout
  interface Timeout {}
  
  type TimerCallback = (...args: any[]) => void;
  
  interface Timer {
    hasRef(): boolean;
    ref(): Timer;
    refresh(): Timer;
    unref(): Timer;
  }
}
